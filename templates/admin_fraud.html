{% extends "base.html" %}
{% block content %}
<style>
  .dashboard-container {
    max-width: 1100px;   /* controls width */
    margin: 2rem auto;   /* centers content with spacing */
  }
</style>

<div class="dashboard-container">
  <div class="card shadow-sm mt-4">
    <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
      <h2 class="mb-0">Fraud Checks</h2>
      <a href="{{ url_for('admin_dashboard') }}" class="btn btn-sm btn-outline-light">
        ‚Üê Back to Dashboard
      </a>
    </div>

    <div class="card-body">
      <div class="mb-4">
        <strong>Risk levels</strong>:
        <ul class="list-inline mb-0">
          {% for it in risk_legend %}
            <li class="list-inline-item">
              <span class="badge
                {% if it.label == 'Very Low' %}bg-secondary
                {% elif it.label == 'Low' %}bg-success
                {% elif it.label == 'Moderate' %}bg-warning text-dark
                {% elif it.label == 'High' %}bg-danger
                {% elif it.label == 'Critical' %}bg-danger
                {% else %}bg-secondary{% endif %}
              ">{{ it.label }}</span> {{ it.range }}
            </li>
          {% endfor %}
        </ul>
      </div>

      <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>When</th>
              <th>User</th>
              <th>Email</th>
              <th>Where</th>
              <th>Score</th>
              <th>Level</th>
              <th>Risky?</th>
              <th>IP</th>
              <th>Reasons</th>
            </tr>
          </thead>
          <tbody>
            {% for r in rows %}
            <tr>
              <td>{{ r.id }}</td>
              <td>{{ r.when }}</td>
              <td>{{ r.user_id }}</td>
              <td>{{ r.email }}</td>
              <td>{{ r.where }}</td>
              <td>{{ r.score }}</td>
              <td>
                <span class="badge
                  {% if r.level == 'Very Low' %}bg-secondary
                  {% elif r.level == 'Low' %}bg-success
                  {% elif r.level == 'Moderate' %}bg-warning text-dark
                  {% elif r.level == 'High' %}bg-danger
                  {% elif r.level == 'Critical' %}bg-danger
                  {% else %}bg-secondary{% endif %}
                ">{{ r.level }}</span>
              </td>
              <td>{{ 'Yes' if r.risky else 'No' }}</td>
              <td>{{ r.ip }}</td>
              <td>{{ r.reasons }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
